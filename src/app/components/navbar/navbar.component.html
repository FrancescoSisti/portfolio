<!-- Mobile Navbar -->
<app-navbar-mobile *ngIf="isMobile"></app-navbar-mobile>

<!-- Desktop Navbar -->
<nav class="nav-container" [class.nav-open]="isMenuOpen" *ngIf="!isMobile">
  <!-- Menu Button -->
  <div class="nav-controls">
    <div class="menu-button">
      <div class="button-wrapper">
        <button class="toggle" (click)="toggleMenu()" [class.active]="isMenuOpen" aria-label="Toggle Menu">
          <span class="line"></span>
          <span class="line"></span>
          <span class="line"></span>
        </button>
      </div>
    </div>
  </div>

  <!-- Experimental Navigation -->
  <div class="nav-experience" [class.active]="isMenuOpen">
    <!-- Animated Background -->
    <div class="nav-background">
      <div class="noise"></div>
      <div class="gradient-sphere"></div>
      <div class="gradient-sphere-2"></div>
    </div>

    <!-- Navigation Content -->
    <div class="nav-content">
      <!-- Left Side - Menu Items -->
      <div class="menu-items">
        <div class="menu-item" *ngFor="let item of menu; let i = index" #menuItem (mouseenter)="onItemHover(i)"
          [class.active]="currentRoute === item.route">
          <a [routerLink]="item.route" (click)="onItemClick(item.route)" [routerLinkActive]="'active'">
            <span class="item-number">0{{i + 1}}</span>
            <span class="item-text">{{item.text}}</span>
          </a>
        </div>
      </div>

      <!-- Right Side - Preview -->
      <div class="preview-container">
        <div class="preview-content">
          <!-- Preview changes based on hovered menu item -->
          <div class="preview" *ngFor="let item of menu; let i = index" [class.active]="hoveredIndex === i"
            [attr.aria-hidden]="hoveredIndex !== i">
            <div class="preview-image" [style.background-image]="'url(' + item.preview + ')'"></div>
            <div class="preview-text">
              <h3>{{item.previewTitle}}</h3>
              <p>{{item.previewDesc}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Info -->
    <div class="nav-footer">
      <div class="social-links">
        <a href="https://github.com" class="social-link" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
          <i class="fab fa-github"></i>
        </a>
        <a href="https://linkedin.com" class="social-link" target="_blank" rel="noopener noreferrer"
          aria-label="LinkedIn">
          <i class="fab fa-linkedin-in"></i>
        </a>
        <a href="https://twitter.com" class="social-link" target="_blank" rel="noopener noreferrer"
          aria-label="Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </div>
      <div class="nav-info">
        <p class="location">
          <i class="fas fa-map-marker-alt"></i>
          Verona, Italia
        </p>
        <p class="availability">Disponibile per progetti</p>
      </div>
    </div>
  </div>
</nav>