<div class="contact-container">
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
  </div>

  <div class="content-wrapper animate-in">
    <div class="header-section">
      <div class="section-badge">
        <i class="fas fa-paper-plane"></i>
        Contattami
      </div>
      <h1>Restiamo in <span class="gradient-text">Contatto</span></h1>
      <p class="subtitle">Hai un progetto in mente? Parliamo di come possiamo collaborare insieme</p>
    </div>

    <div class="contact-grid">
      <div class="contact-info">
        <div class="info-card">
          <div class="icon-wrapper">
            <i class="fas fa-envelope"></i>
          </div>
          <h3>Email</h3>
          <p>francescosisti61&#64;gmail.com</p>
          <a href="mailto:francescosisti61@gmail.com" class="action-link">
            Invia Email
            <i class="fas fa-arrow-right"></i>
          </a>
        </div>

        <div class="info-card">
          <div class="icon-wrapper">
            <i class="fas fa-map-marker-alt"></i>
          </div>
          <h3>Posizione</h3>
          <p>Corso Venezia 83, Verona</p>
          <a (click)="scrollToMap()" class="action-link">
            Visualizza sulla Mappa
            <i class="fas fa-arrow-right"></i>
          </a>
        </div>

        <div class="social-links">
          <h3>Seguimi</h3>
          <div class="links">
            <a href="https://github.com/FrancescoSisti" class="social-link github" target="_blank" title="GitHub">
              <i class="fab fa-github"></i>
            </a>
            <a href="https://www.linkedin.com/in/francesco-sisti-21b88023a/" class="social-link linkedin"
              target="_blank" title="LinkedIn">
              <i class="fab fa-linkedin-in"></i>
            </a>
            <a href="https://www.instagram.com/_francescosisti_/" class="social-link instagram" target="_blank"
              title="Instagram">
              <i class="fab fa-instagram"></i>
            </a>
          </div>
        </div>
      </div>

      <div class="contact-form">
        <form (ngSubmit)="onSubmit()" #contactForm="ngForm" novalidate>
          <div class="form-group" [class.has-error]="hasFieldError('name')">
            <label for="name">Nome *</label>
            <input type="text" id="name" name="name" [(ngModel)]="formData.name" required placeholder="Il tuo nome" (input)="onFieldChange('name')">
            <div *ngIf="getFieldError('name')" class="field-error">{{ getFieldError('name') }}</div>
          </div>

          <div class="form-group" [class.has-error]="hasFieldError('email')">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" [(ngModel)]="formData.email" required
              placeholder="tua.email@esempio.com" (input)="onFieldChange('email')">
            <div *ngIf="getFieldError('email')" class="field-error">{{ getFieldError('email') }}</div>
          </div>

          <div class="form-group" [class.has-error]="hasFieldError('subject')">
            <label for="subject">Oggetto</label>
            <input type="text" id="subject" name="subject" [(ngModel)]="formData.subject"
              placeholder="Richiesta Progetto" (input)="onFieldChange('subject')">
            <div *ngIf="getFieldError('subject')" class="field-error">{{ getFieldError('subject') }}</div>
          </div>

          <div class="form-group" [class.has-error]="hasFieldError('phone')">
            <label for="phone">Telefono</label>
            <input type="tel" id="phone" name="phone" [(ngModel)]="formData.phone"
              placeholder="+39 123 456 7890" (input)="onFieldChange('phone')">
            <div *ngIf="getFieldError('phone')" class="field-error">{{ getFieldError('phone') }}</div>
          </div>

          <div class="form-group" [class.has-error]="hasFieldError('company')">
            <label for="company">Azienda</label>
            <input type="text" id="company" name="company" [(ngModel)]="formData.company"
              placeholder="Nome della tua azienda" (input)="onFieldChange('company')">
            <div *ngIf="getFieldError('company')" class="field-error">{{ getFieldError('company') }}</div>
          </div>

          <div class="form-group" [class.has-error]="hasFieldError('message')">
            <label for="message">Messaggio *</label>
            <textarea id="message" name="message" [(ngModel)]="formData.message" required rows="5"
              placeholder="Parlami del tuo progetto..." (input)="onFieldChange('message')"></textarea>
            <div *ngIf="getFieldError('message')" class="field-error">{{ getFieldError('message') }}</div>
          </div>

          <button type="submit" class="submit-btn" [disabled]="isButtonDisabled">
            {{ isSubmitting ? 'Invio in corso...' : 'Invia Messaggio' }}
            <i class="fas fa-paper-plane"></i>
          </button>

          <!-- Waiting tooltip -->
          <div *ngIf="showWaitingTooltip" class="waiting-tooltip">
            <i class="fas fa-coffee"></i>
            Non sono bloccato, sto svegliando il backend...
          </div>

          <div *ngIf="submitSuccess" class="success-message">
            <i class="fas fa-check-circle"></i>
            Grazie per il tuo messaggio! Ti risponderò il prima possibile.
          </div>

          <div *ngIf="submitError" class="error-message">
            <i class="fas fa-exclamation-circle"></i>
            {{ errorMessage || 'Si è verificato un errore durante l\'invio. Per favore riprova più tardi o contattami direttamente via email.' }}
          </div>
        </form>

        <!-- Custom Development Tooltip -->
        <div *ngIf="showCustomTooltip" class="custom-tooltip">
          <div class="tooltip-content">
            <div class="gradient-border"></div>
            <div class="tooltip-header">
              <div class="tooltip-icon">
                <i class="fas fa-lightbulb"></i>
              </div>
              <h4>Lo sapevi che...</h4>
              <button class="close-btn" (click)="closeCustomTooltip()">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <p>Questo form di contatto è stato integrato completamente su misura, senza utilizzare servizi di terze parti come Formspree o EmailJS. Tutto il backend è sviluppato in house per garantire massima sicurezza e controllo sui dati!</p>
            <div class="tooltip-tech">
              <span class="tech-badge">Custom Backend</span>
              <span class="tech-badge">Zero Dependencies</span>
              <span class="tech-badge">Full Control</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="map-section" id="map-section">
      <div class="map-container">
        <div id="map"></div>
        <div class="map-overlay">
          <div class="location-info">
            <p>Corso Venezia 83, Verona</p>
            <button class="directions-btn" (click)="getDirections()">
              <i class="fas fa-directions"></i>
              Indicazioni
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>